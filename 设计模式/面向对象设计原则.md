## 概述
一个可维护性较低的软件设计，通常由以下四个原因造成
1.  过于僵硬
	很难在一个软件里加入新的性能，比如提高网站访问速度，加入 Redis 意味着对系统大幅修改
2. 过于脆弱
	过于脆弱与软件僵硬同时存在，是系统软件系统在修改已有代码时过于脆弱
3. 复用率低
	复用指的是一个软件的组成部分，可以在同一个项目的不同地方甚至另一个项目中重复使用
4. 黏度过高
	一个系统设计，如果总是使得第二种方法比第一种方法容易，就叫黏度过高
---
软件的复用或者重用拥有很多优点
- 提高软件开发效率
- 提高软件质量
- 节约开发成本
- 一定程度上改善系统可维护性
重构 (Refactoring) 是在不改变软件现有功能的基础上，通过调整程序代码改善软件的质量、性能，使其程序的设计模式和架构更趋合理，提高软件的扩展性和维护性。
### 面向对象设计原则

| 设计原则名称 | 设计原则简介                                                                |
| ------ | --------------------------------------------------------------------- |
| 单一职责原则 | 类的职责要单一，不能将太多的职责放在一个类                                                 |
| 开闭原则   | 软件实体对扩展是开放的，但对修改是关闭的，即使在不修改软件实体的基础上去拓展其功能                             |
| 里氏代换原则 | 在软件系统中，一个可以接受基类对象的地方必然可以接受个子类对象                                       |
| 依赖倒转原则 | 要针对抽象层编程，而不要针对具体类编程                                                   |
| 接口隔离原则 | 使用多个专门接口来取代一个统一的接口                                                    |
| 合成复用原则 | 在系统中应该尽量多使用组合和聚合关联关系，尽量少使用甚至不使用继承关系                                   |
| 迪米特法则  | 一个软件实体对其他实体的引用越少越好，或者说如果两个类不彼此通信，那么这两个类就不要发生直接的相互作用，而是通过引入一个第三者发生间接交互 |
## 单一职责原则
**一个对象应该只包含单一的职责，并且该职责被完整地封装在一个类中**
分析：
- 一个类职责越多，它被复用的可能性越小
- 类的职责：数据职责和行为职责，数据职责通过属性体现，行为职责通过方法体现
- 单一职责原则实现高内聚、低耦合
**按照单一原则重构：**
![[Pasted image 20251129222949.png]]
## 开闭原则
**多扩展开放、对修改关闭**
开闭原则关键在于抽象
- 抽象技术：abstract class，Interface
- 抽象预见了可能的所有扩展（闭）
- 由抽象可以随时导出新的类（开）
#### 使用开闭原则步骤
1. 在变化的需求中提炼共性、制定抽象标准
2. 具体实现抽象标准
3. 让软件主体依赖抽象标准
![[Pasted image 20251129223910.png]]
## 里氏代换原则
若对于类型 S 的任一对象 o 1，均有类型 T 的对象 o 2 存在，使得在 T 定义的所有程序 P 中，用 o 1 替换 o 2 之后，程序行为不变，则 S 是 T 的子类型
**在软件中如果能够使用基类对象，那么一定能够使用其子类对象** 
![[Pasted image 20251201101356.png]]
## 依赖倒转原则
高层模块不应该依赖低层模块，他们都应该依赖抽象。抽象不应该依赖细节，细节应该依赖抽象（针对接口编程）
![[Pasted image 20251201103245.png]]
## 接口隔离原则
指使用多个专门的接口，而不使用单一的总接口，每个接口都承担一种相对独立的角色
- 单一职责原则
- 只提供用户需要的行为，隐藏用户不需要的行为
![[Pasted image 20251201103619.png]]
## 合成复用原则
尽量使用对象组合，而不是继承来达到复用目的
即在内部将类作为一个成员变量作为属性而不是继承他，这样就不用知道这个类的实现方式，在修改这个类的时候，依赖它的类也不会受到影响
## 迪米特法则
一个软件实体应当尽可能少的与其他实体发生相互作用
对于一个对象，其朋友包括以下几类：
- 当前对象本身（this）
- 以参数形式传入到当前对象方法中的对象
- 当前对象的成员对象
- 如果当前对象的成员对象是一个集合，那么集合中的元素也是朋友
- 当前对象所创建的对象
满足其一即可
